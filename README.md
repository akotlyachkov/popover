# Social-Utils
Компонент, отвечающий за отображение всплывающего окна со списком идентифицированных профилей человека в соцсетях.

## Dependencies
В компоненте используются 
* jQuery 3.2.1
* TypeScript 2.4.1
* Bootstrap 3.3.7

## Installation
```bash
npm i social-utils
```

## Usage
Перед использованием обязательно должны быть подключены jQuery, Bootstrap popover.js и Bootstrap tooltip.js

Доступ к компоненту:
* Глобальная переменная `SocialUtils`
* `import {SocialUtils} from 'social-utils'`
* `const SocialUtils = require('social-utils')`

### Атрибут data-options
У элемента, на котором будет вызываться всплывающее окно, обязательно должен присутствовать атрибут `data-options`.
Атрибут должен содержать JSON со следующими свойствами:

| Свойство    | Тип              | Значения                                                                                            |
|-------------|------------------|-----------------------------------------------------------------------------------------------------|
| orgid       | `number`         | id, который будет передан в POST-запросе                                                            |
| profiles    | `Array<Profile>` | Список объектов с данными профилей, аналогичных тем, что возвращает сервер в ответе на POST-запрос  |
| icons       | `Array<string>`  | Список идентификаторов для иконок соцсетей `'vk', 'fb', 'li', 'tw', 'in'`                           |
| popover     | `boolean`        | Определяет, будет ли появляться всплывающее окно (в некоторых случаях нужно только наличие иконок)  |
| position    | `string`         | Определяет положение иконок соцсетей относительно элемента с селектором `'right', 'left', 'inside'` |
| customClass | `string`         | Добавляет классы элементу `<span>`, в котором будут находиться иконки соцсетей                      |

```typescript
class Profile {
    city?:string
    education?:string
    firstName?:string
    fullName?:string
    lastName?:string
    photo?:string
    photoPreview?:string
    profileLink:string
    similarityCount?:number
    similarityIndex?:number
    socialKey:string
    socialName:string
    strict:boolean
    work?:string
    workPosition?:string
}
```

### Popover
Вызов всплывающего окна напрямую, без создания иконок. Вызывается функция `Popover()`, которая возвращает объект с 
методом `init`, инициализирующим всплывающее окно и свойством `selectors`, в котором содержится множество(Set) 
используемых селекторов.
```javascript
let popover = SocialUtils.Popover();
popover.init('.js-hook', options) //Оба параметра являются обязательными;
```
Класс `.js-hook` использован для примера. Вместо него должен быть передан селектор - по нему будет идти поиск элементов, на 
которых будет вызываться всплывающее окно.

В `options` должен быть передан объект со следующими параметрами:

| Параметр         | Тип     | Значения                                                                                  | Функция                                                                        | Обязательный                                                                    |
|------------------|---------|-------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
| triggerEvent     | string  | 'click' или 'hover'                                                                       | Определяеттип события по которому будет вызываться/скрываться всплывающее окно | Да                                                                              |
| url              | string  | API address                                                                               | Адрес API, с которого будут загружаться данные для всплывающего окна           | Да, кроме случая, когда в data-options есть уже загруженные данные для профилей |
| popoverPlacement | string  | Посмотреть доступные значения можно [здесь](http://getbootstrap.com/javascript/#popovers) | Определяет положение всплывающего окна относительно селектора                  |                                                                                 |
| isIchp           | boolean | true или false                                                                            | Переключает в режим ИЧП                                                        |                                                                                 |

### Icons
Если необходимо добавить в разметку страницы иконки соцсетей идентифицированных
профилей, то нужно воспользоваться методом `icons`.

```javascript
SocialUtils.icons('.js-hook', options);
```

Из объекта `options` подбираются некоторые обязательные для корректной
инициализации иконок свойства, а далее он передается в качестве второго
аргумента в функцию `Popover()`. При вызове в `options` передается объект
со следующими параметрами:

| Параметр | Тип      | Значения                     | Функция                                                                 | Обязательный                |
|----------|----------|------------------------------|-------------------------------------------------------------------------|-----------------------------|
| iconPath | `string` | Путь к директории с иконками | Задает адрес, с которого загружаются иконки                             | Да                          |
| iconExt  | `string` | Формат файла иконки соцсети  |                                                                         | Да                          |
| position | `string` | `'right', 'left', 'inside'`  | Определяет положение иконок соцсетей относительно элемента с селектором | Нет, по умолчанию `'right'` |

## Example
```bash
node example\server.js
# Запуск тестового приложения на localhost:3000
```